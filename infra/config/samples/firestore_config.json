[
  {
    "collection_name": "GoogleAdsConfig",
    "document_id": "2518446444",
    "data": {
      "customerId": 2518446444,
      "logincustomerid": "6963536729",
      "instruction": "Workflow ID: standard_opt_v1 Description: Standard optimization workflow for campaigns.",
      "campaigns": [
        {
          "campaignId": 23429734705,
          "instruction": "If pollen count is High (>=1) AND weather is not 'Rain', set status to ENABLED, budget to 500, and bid to 4.00. If it is Raining OR pollen is Low (<1), set status to PAUSED."
        },
        {
          "campaignId": 23435571990,
          "instruction": "If current temperature is greater than 24Â°C for the configured locations, remove that location from the campaign. Use locations configured in firestore to get latitude and longitude data."
        }
      ],
      "locations": [
        {
          "city": "Melbourne",
          "city_ascii": "Melbourne",
          "country_fips": "AS",
          "country_name": "Australia",
          "lat": -37.8136,
          "lng": 144.9631,
          "population": 5078000,
          "state_id": "VIC",
          "state_name": "Victoria"
        },
        {
          "city": "Delhi",
          "city_ascii": "Delhi",
          "country_fips": "IN",
          "country_name": "India",
          "lat": 28.6139,
          "lng": 77.2090,
          "population": 32941000,
          "state_id": "DL",
          "state_name": "Delhi"
        },
        {
          "city": "London",
          "city_ascii": "London",
          "country_fips": "UK",
          "country_name": "United Kingdom",
          "lat": 51.5074,
          "lng": -0.1278,
          "population": 8982000,
          "state_id": "ENG",
          "state_name": "Greater London"
        },
        {
          "city": "Bangkok",
          "city_ascii": "Bangkok",
          "country_fips": "TH",
          "country_name": "Thailand",
          "lat": 13.7563,
          "lng": 100.5018,
          "population": 10539000,
          "state_id": "10",
          "state_name": "Krung Thep Maha Nakhon"
        },
        {
          "city": "Miami",
          "city_ascii": "Miami",
          "country_fips": "US",
          "country_name": "United States",
          "lat": 25.7617,
          "lng": -80.1918,
          "population": 442241,
          "state_id": "FL",
          "state_name": "Florida"
        }
      ]
    }
  },
  {
    "collection_name": "CustomerInstructions",
    "documents": [
      {
        "data": {
          "instruction": "Workflow ID: standard_opt_v1 Description: Standard Daily Campaign Optimization Workflow  SOP Steps:  1.  **Identify Customer:** Determine the customerId for the current run (e.g., from the request or environment) and for that customer get login_customer_id from customerinstructions collection.  2.  **Fetch Customer Configuration:** Load the document from the 'GoogleAdsConfig' collection where the document ID matches the customerId.  3.  **Validate Configuration:** If no document is found for the customerId, inform the user that the customer configuration is missing and terminate the workflow for this customer.  4.  **Initiate Campaign Loop:** Iterate through each item in the 'campaign' array within the loaded GoogleAdsConfig document. For each item, perform the subsequent steps (5-13).  5.  **Fetch Google Ads Campaign Data:** Retrieve key performance metrics for the current campaignId. This includes cost, conversions, ROAS, CTR, and impressions from the last 7 days.  6.  **Fetch External API Data:** Make calls(if required) to registered APIs in APIHub as defined in the current campaign's instructions.  7.  **Evaluate Campaign Budgets:** Analyze and determine necessary budget adjustments for the current campaignId based on its instructions, using both Google Ads data and API Hub data.  8.  **Evaluate Campaign Statuses:** Determine if the current campaignId should be paused or enabled based on its  instructions, using both Google Ads data and API Hub data.  9.  **Evaluate Campaign Locations:** Analyze location targeting for the current campaignId based on its instructions, using both Google Ads data and API Hub data.  10. **Compile Campaign Recommendations:** Consolidate all proposed changes for the current campaignId.  11. **End Campaign Loop:** Repeat steps 5-10 for the next campaign in the 'campaign' array.  12. **Aggregate All Recommendations:** Combine all recommendations generated for all campaigns for this customer.  13. **Log Decision Taken:** Present the aggregated recommendations. Include the customer ID and a summary of all proposed changes.  14. **Apply Approved Changes to Google Ads:** Execute the approved modifications in Google Ads using the appropriate updater tools.  16. **Finalize Workflow:** Log completion for the customerId."
        },
        "id": "2518446444"
      },
      {
        "data": {
          "instruction": "Workflow ID: standard_opt_v1 Description: Standard Daily Campaign Optimization Workflow  SOP Steps:  1.  **Identify Customer:** Determine the customerId for the current run (e.g., from the request or environment).  2.  **Fetch Customer Configuration:** Load the document from the 'GoogleAdsConfig' collection where the document ID matches the customerId.  3.  **Validate Configuration:** If no document is found for the customerId, inform the user that the customer configuration is missing and terminate the workflow for this customer.  4.  **Initiate Campaign Loop:** Iterate through each item in the 'campaign' array within the loaded GoogleAdsConfig document. For each item, perform the subsequent steps (5-13).  5.  **Fetch Google Ads Campaign Data:** Retrieve key performance metrics for the current campaignId. This includes cost, conversions, ROAS, CTR, and impressions from the last 7 days.  6.  **Fetch External API Data:** Make calls(if required) to registered APIs in APIHub as defined in the current campaign's instructions.  7.  **Evaluate Campaign Budgets:** Analyze and determine necessary budget adjustments for the current campaignId based on its instructions, using both Google Ads data and API Hub data.  8.  **Evaluate Campaign Statuses:** Determine if the current campaignId should be paused or enabled based on its  instructions, using both Google Ads data and API Hub data.  9.  **Evaluate Campaign Locations:** Analyze location targeting for the current campaignId based on its instructions, using both Google Ads data and API Hub data.  10. **Compile Campaign Recommendations:** Consolidate all proposed changes for the current campaignId.  11. **End Campaign Loop:** Repeat steps 5-10 for the next campaign in the 'campaign' array.  12. **Aggregate All Recommendations:** Combine all recommendations generated for all campaigns for this customer.  13. **Log Decision Taken:** Present the aggregated recommendations. Include the customer ID and a summary of all proposed changes.  14. **Apply Approved Changes to Google Ads:** Execute the approved modifications in Google Ads using the appropriate updater tools.  16. **Finalize Workflow:** Log completion for the customerId."
        },
        "id": "4086619433"
      },
      {
        "data": {
          "instruction": "Workflow ID: standard_opt_v1 Description: Standard Daily Campaign Optimization Workflow  SOP Steps:  1.  **Identify Customer:** Determine the customerId for the current run (e.g., from the request or environment). 2.  **Fetch Customer Configuration:** Load the document from the `SA360Config` collection where the document ID matches the customerId. 3.  **Validate Configuration:** If no document is found for the customerId, inform the user that the customer configuration is missing and terminate the workflow for this customer.  4.  **Initiate Campaign Loop:** Iterate through each item in the `campaign` array within the loaded SA360Config document. For each item, perform the subsequent steps (5-14). 5.  **Initiatie SA360 toolset:** Load `SheetId` and `SheetName` from loaded `SA360Config` collection where document ID matches the customerId. 6.  **Fetch SA360 Campaign Data:** Pass the `SheetId` & `SheetName` to SA360 toolset and retrieve key performance metrics for the current campaignId. This includes all campaign details like: cost, locations, campaign name etc. 7.  **Fetch External API Data:** Make calls(if required) to registered APIs in APIHub as defined in the current campaign's instructions.  8.  **Evaluate Campaign Budgets:** Analyze and determine necessary budget adjustments for the current campaignId based on its instructions, using both SA360 sheets data and API Hub data.  9.  **Evaluate Campaign Statuses:** Determine if the current campaignId should be paused or enabled based on its  instructions, using both SA360 sheets data and API Hub data.  10. **Evaluate Campaign Locations:** Analyze location targeting for the current campaignId based on its instructions, using both SA360 sheets data and API Hub data.  11. **Compile Campaign Recommendations:** Consolidate all proposed changes for the current campaignId.  12. **End Campaign Loop:** Repeat steps 5-11 for the next campaign in the 'campaign' array.  13. **Aggregate All Recommendations:** Combine all recommendations generated for all campaigns for this customer.  14. **Log Decision Taken:** Present the aggregated recommendations. Include the customer ID and a summary of all proposed changes.  15. **Apply Approved Changes to SA360 sheet:** Execute the approved modifications in SA360 sheet using the appropriate updater tools.  16. **Finalize Workflow:** Log completion for the customerId"
        },
        "id": "6621513488"
      },
      {
        "data": {
          "instruction": "Workflow ID: standard_opt_v1 Description: Standard Daily Campaign Optimization Workflow  SOP Steps:  1.  **Identify Customer:** Determine the customerId for the current run (e.g., from the request or environment).  2.  **Fetch Customer Configuration:** Load the document from the 'GoogleAdsConfig' collection where the document ID matches the customerId.  3.  **Validate Configuration:** If no document is found for the customerId, inform the user that the customer configuration is missing and terminate the workflow for this customer.  4.  **Initiate Campaign Loop:** Iterate through each item in the 'campaign' array within the loaded GoogleAdsConfig document. For each item, perform the subsequent steps (5-13).  5.  **Fetch Google Ads Campaign Data:** Retrieve key performance metrics for the current campaignId. This includes cost, conversions, ROAS, CTR, and impressions from the last 7 days.  6.  **Fetch External API Data:** Make calls(if required) to registered APIs in APIHub as defined in the current campaign's instructions.  7.  **Evaluate Campaign Budgets:** Analyze and determine necessary budget adjustments for the current campaignId based on its instructions, using both Google Ads data and API Hub data.  8.  **Evaluate Campaign Statuses:** Determine if the current campaignId should be paused or enabled based on its  instructions, using both Google Ads data and API Hub data.  9.  **Evaluate Campaign Locations:** Analyze location targeting for the current campaignId based on its instructions, using both Google Ads data and API Hub data.  10. **Compile Campaign Recommendations:** Consolidate all proposed changes for the current campaignId.  11. **End Campaign Loop:** Repeat steps 5-10 for the next campaign in the 'campaign' array.  12. **Aggregate All Recommendations:** Combine all recommendations generated for all campaigns for this customer.  13. **Log Decision Taken:** Present the aggregated recommendations. Include the customer ID and a summary of all proposed changes.  14. **Apply Approved Changes to Google Ads:** Execute the approved modifications in Google Ads using the appropriate updater tools.  16. **Finalize Workflow:** Log completion for the customerId."
        },
        "id": "6963536729"
      }
    ]
  },
  {
    "collection_name": "SA360Config",
    "document_id": "6621513488",
    "data": {
      "SheetId": "1-GLKv82cYfMOfRgofz_PCgMgX05uxUZKJhtrkwAnvcA",
      "SheetName": "Sheet0",
      "campaigns": [
        {
          "campaignId": 20159544373,
          "instructions": "If pollen level for location: longitude 35.32 and latitude 32.32 is equal to 1 for next 1 day, set the budget to 3"
        },
        {
          "campaignId": 20159544424,
          "instructions": "If pollen level for location: longitude 35.32 and latitude 32.32 is equal to 1 for next 1 day, set the budget to 10"
        }
      ],
      "locations": [
        {
          "city": "Melbourne",
          "city_ascii": "Melbourne",
          "country_fips": "AS",
          "country_name": "Australia",
          "lat": -37.8136,
          "lng": 144.9631,
          "population": 5078000,
          "state_id": "VIC",
          "state_name": "Victoria"
        },
        {
          "city": "Delhi",
          "city_ascii": "Delhi",
          "country_fips": "IN",
          "country_name": "India",
          "lat": 28.6139,
          "lng": 77.2090,
          "population": 32941000,
          "state_id": "DL",
          "state_name": "Delhi"
        },
        {
          "city": "London",
          "city_ascii": "London",
          "country_fips": "UK",
          "country_name": "United Kingdom",
          "lat": 51.5074,
          "lng": -0.1278,
          "population": 8982000,
          "state_id": "ENG",
          "state_name": "Greater London"
        },
        {
          "city": "Bangkok",
          "city_ascii": "Bangkok",
          "country_fips": "TH",
          "country_name": "Thailand",
          "lat": 13.7563,
          "lng": 100.5018,
          "population": 10539000,
          "state_id": "10",
          "state_name": "Krung Thep Maha Nakhon"
        },
        {
          "city": "Miami",
          "city_ascii": "Miami",
          "country_fips": "US",
          "country_name": "United States",
          "lat": 25.7617,
          "lng": -80.1918,
          "population": 442241,
          "state_id": "FL",
          "state_name": "Florida"
        }
      ]
    }
  }
]